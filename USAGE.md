# 使用示例文档

本文档提供详细的使用示例和最佳实践。

## 📝 完整使用流程示例

### 示例：创建"线性代数"课程学习助手

#### 步骤 1: 启动系统

```bash
# 终端 1: 启动后端
python backend/api.py

# 终端 2: 启动前端
streamlit run frontend/streamlit_app.py
```

#### 步骤 2: 创建课程

1. 打开浏览器访问 `http://localhost:8501`
2. 在侧边栏点击「➕ 创建新课程」
3. 输入：
   - 课程名称: `线性代数`
   - 学科标签: `数学`
4. 点击「创建」

#### 步骤 3: 上传教材

准备教材文件（示例）：
- `线性代数教材第一章.pdf` - 矩阵基础
- `线性代数教材第二章.pdf` - 行列式
- `课堂讲义.txt` - 补充笔记

上传步骤：
1. 在侧边栏选择课程「线性代数」
2. 点击「上传资料」
3. 选择文件并上传
4. 重复上传所有教材
5. 点击「🔨 构建索引」
6. 等待索引构建完成（会显示文本块数量）

#### 步骤 4: 学习模式使用

**场景 1: 概念理解**

```
👤 用户: 什么是矩阵的秩？

🤖 助手回答:
## 1. 核心答案
矩阵的秩是指矩阵的行向量组（或列向量组）的最大线性无关组所含向量的个数。

## 2. 详细解释

**相关概念定义**
- 线性无关：向量组中任一向量都不能由其他向量线性表示
- 最大线性无关组：向量组的一个部分组，它本身线性无关，且添加其他任何向量都会线性相关

**原理说明**
矩阵的秩反映了矩阵所代表的线性变换的"维度"或"自由度"。秩越大，说明矩阵包含的独立信息越多。

## 3. 关键要点与易错点

**核心要素**
- 行秩 = 列秩（矩阵秩的重要性质）
- 秩 ≤ min(行数, 列数)
- 满秩矩阵是可逆矩阵

**易错点**
- 不要混淆"秩"与"行数/列数"
- 秩为0只有零矩阵
- 初等变换不改变矩阵的秩

## 4. 教材引用
[来源1: 线性代数教材第一章.pdf, 第15页]
"矩阵的秩定义为其行向量组的秩..."

## 5. 知识点总结
矩阵的秩是衡量矩阵线性无关性的核心指标，通过初等变换可以方便地计算。

📑 引用来源:
- 来源1: 线性代数教材第一章.pdf (第15页)
- 来源2: 课堂讲义.txt
```

**场景 2: 例题讲解**

```
👤 用户: 如何计算矩阵的秩？

🤖 助手: [详细讲解初等变换法、阶梯形矩阵判断等，并附教材引用]
```

#### 步骤 5: 练习模式使用

**场景 3: 生成练习题**

```
👤 用户: 给我出一道关于矩阵秩的中等难度练习题

🤖 助手:
## 练习题目

已知矩阵 A = 
⎡ 1  2  3 ⎤
⎢ 2  4  6 ⎥
⎣ 1  2  1 ⎦

(1) 求矩阵 A 的秩
(2) 判断矩阵 A 的行向量是否线性相关
(3) 说明理由

**难度**: medium
**章节**: 矩阵的秩

请回答上述问题，我会为你评分并提供反馈。
```

**场景 4: 提交答案并获得评分**

```
👤 用户: 
答案：
(1) rank(A) = 2
(2) 行向量线性相关
(3) 因为第二行是第一行的2倍，所以存在线性相关关系

🤖 助手:
## 评分结果

**得分**: 75/100

**反馈**:
✓ 正确识别了行向量的线性相关关系
✓ 观察到第二行是第一行的2倍
✗ 秩的计算不够完整，需要对第三行也进行分析
✗ 缺少初等变换的具体步骤

**改进建议**:
对矩阵进行初等行变换:
⎡ 1  2  3 ⎤    ⎡ 1  2  3 ⎤
⎢ 2  4  6 ⎥ → ⎢ 0  0  0 ⎥
⎣ 1  2  1 ⎦    ⎣ 0  0 -2⎦

可以看出有2个非零行，因此 rank(A) = 2

**错误类型**: 步骤缺失

**标准答案**:
(1) 通过初等行变换化为阶梯形矩阵，非零行数为2，故 rank(A) = 2
(2) 线性相关。因为秩为2，小于行数3，根据定理可知行向量线性相关
(3) 具体地，第二行 = 2×第一行

---
此题已记录到错题本。继续练习请输入新的题目要求。
```

#### 步骤 6: 考试模式使用

```
👤 用户: 开始线性代数第一章测试

🤖 助手:
## 模拟考试题目

综合题：给定矩阵 B = 
⎡ 1  0  2  -1 ⎤
⎢ 2  1  3   0 ⎥
⎣ 1  1  1   1 ⎦

(1) 求 rank(B)
(2) 求 B 的一个最大线性无关组
(3) 将其余列向量用最大线性无关组表示

**提示**: 这是考试模式，请独立完成。只允许使用计算器工具。

**评分标准**:
- 正确计算秩 (30分)
- 找到最大线性无关组 (40分)
- 正确表示其余向量 (30分)

请提交你的答案。
```

## 🎨 不同模式的使用技巧

### 学习模式 (Learn)

**适用场景**:
- 理解新概念
- 复习知识点
- 查找定理证明
- 理解例题

**提问技巧**:
```
✅ 好的提问:
- "矩阵的秩有哪些性质？"
- "如何理解特征值的几何意义？"
- "举例说明线性变换的应用"

❌ 避免的提问:
- "帮我做题"（应该用练习模式）
- "考试会考什么"（应该用考试模式）
```

**特点**:
- ✅ 允许使用所有工具（计算器、搜索、文件写入）
- ✅ 可以保存笔记
- ✅ 每个回答都有教材引用

### 练习模式 (Practice)

**适用场景**:
- 做题练习
- 获得反馈
- 积累错题
- 针对性训练

**使用流程**:
1. 指定题目类型和难度
2. 系统出题
3. 独立完成
4. 提交答案
5. 获得评分和反馈
6. 查看错题本

**难度选择**:
```
简单 (easy): "给我出一道简单的矩阵乘法题"
中等 (medium): "来一道中等难度的秩计算题"
困难 (hard): "出一道困难的特征值综合题"
```

### 考试模式 (Exam)

**适用场景**:
- 考前模拟
- 自我检测
- 时间管理训练
- 薄弱点诊断

**特点**:
- ⚠️ 禁用网页搜索
- ✅ 只能使用计算器
- ✅ 自动生成考后报告
- ✅ 分析薄弱知识点

**最佳实践**:
```
1. 设定时间限制（自我约束）
2. 完整做完再提交
3. 认真查看考后报告
4. 针对薄弱点复习
```

## 📚 教材上传最佳实践

### 推荐的文档结构

```
课程目录/
├── 01_教材_第一章.pdf
├── 02_教材_第二章.pdf
├── 03_教材_第三章.pdf
├── 课堂讲义_矩阵运算.pdf
├── 课堂讲义_线性方程组.pdf
└── 习题解答.txt
```

### 文件命名建议

- ✅ 使用有意义的名称：`第三章_线性方程组.pdf`
- ✅ 包含章节信息：`Ch3_Linear_Systems.pdf`
- ❌ 避免模糊命名：`文档1.pdf`, `新建文件.txt`

### 文档质量要求

- ✅ PDF 文字可复制（非扫描版）
- ✅ TXT 编码为 UTF-8
- ✅ 内容完整清晰
- ⚠️ 扫描版 PDF 需要 OCR 处理（当前版本不支持）

## 🔍 检索效果优化

### 提高检索准确性

1. **使用课程专业术语**
   ```
   ✅ "矩阵的秩"
   ❌ "矩阵那个数"
   ```

2. **明确问题范围**
   ```
   ✅ "第三章线性方程组的解法"
   ❌ "怎么解方程"
   ```

3. **引用定理名称**
   ```
   ✅ "根据克拉默法则求解"
   ❌ "用那个公式求解"
   ```

### 引用置信度

系统会显示引用的相关度分数：
- **0.8-1.0**: 高度相关，可信度高
- **0.6-0.8**: 相关，建议参考
- **< 0.6**: 弱相关，仅供参考

## 🗂️ 数据管理

### 查看错题本

错题保存在: `data/workspaces/<课程名>/mistakes/mistakes.jsonl`

每条记录包含：
```json
{
  "timestamp": "2024-02-16T10:30:00",
  "question": "题目内容",
  "student_answer": "学生答案",
  "standard_answer": "标准答案",
  "score": 75.0,
  "feedback": "反馈内容",
  "mistake_tags": ["步骤缺失"]
}
```

### 导出学习笔记

笔记保存在: `data/workspaces/<课程名>/notes/`

可以使用 FileWriter 工具保存笔记：
```
👤 用户: 请把今天学的矩阵秩的内容总结保存到笔记
🤖 助手: [自动整理并保存到 notes/matrix_rank_summary.md]
```

## 🛠️ 工具使用示例

### Calculator 工具

```
👤 用户: 计算 det([[1,2],[3,4]])
🤖 助手: 使用计算器...
结果: -2

🔧 工具调用:
{
  "tool": "calculator",
  "expression": "1*4 - 2*3",
  "result": -2
}
```

### WebSearch 工具 (仅学习模式)

```
👤 用户: 特征值在工程中有什么应用？
🤖 助手: 让我搜索一下...
[结合教材内容和搜索结果给出回答]

🔧 工具调用:
{
  "tool": "websearch",
  "query": "特征值 工程应用"
}
```

## 💡 进阶技巧

### 1. 批量练习

```
用户: 给我连续出5道关于矩阵秩的题目，难度递增
```

### 2. 知识点串联

```
用户: 从向量空间到矩阵秩，帮我梳理知识脉络
```

### 3. 错题回顾

```
用户: 回顾我所有关于"线性相关"的错题
```

### 4. 考前冲刺

```
用户: 根据我的错题本，生成针对性的复习计划
```

## ⚠️ 常见问题

### Q1: 为什么有时检索不到相关内容？

**A**: 可能原因：
1. 教材未包含该知识点 → 上传更多资料
2. 提问不够具体 → 使用专业术语
3. 索引未构建 → 重新构建索引

### Q2: 出题质量不理想怎么办？

**A**: 改进方法：
1. 上传更多习题资料
2. 明确指定章节和知识点
3. 调整难度描述

### Q3: 评分觉得不准确？

**A**: 建议：
1. 提供更详细的解答步骤
2. 使用教材规范的符号和术语
3. 查看标准答案对比

### Q4: 考试模式能否临时启用搜索？

**A**: 不能。考试模式禁用搜索是设计特性，模拟真实考试环境。如需搜索，请切换到学习模式。

## 📞 技术支持

如有问题，请：
1. 查看 README.md
2. 检查 `.env` 配置
3. 查看后端日志
4. 提交 GitHub Issue

---

**祝学习愉快！** 🎓
